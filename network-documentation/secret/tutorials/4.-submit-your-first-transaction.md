---
description: Learn how to write to the Secret Network using DataHub
---

# 4. Submit your first transactions

## Introduction

At some point, while building on the Secret Network, you will want to submit transactions.

In this tutorial, we will learn how to submit transactions using SecretJS and a [DataHub](https://datahub.figment.io/sign_up?service=secret) node.

### Prerequisites

Please make sure that you have completed the tutorials:

1. [Connecting to a Secret Network node with DataHub](https://learn.figment.io/network-documentation/secret/tutorials/1.-connecting-to-a-secret-node-using-datahub)
2. [Setting up your wallet](https://learn.figment.io/network-documentation/secret/tutorials/2.-setting-up-your-wallet.md)
3. [Querying the Secret Network](https://learn.figment.io/network-documentation/secret/tutorials/3.-querying-the-secret-blockchain)

We will be building on top of the Node.js application created in these tutorials.

## Sending Tokens

In the previous tutorials, we created our account and we used the Testnet faucet to request test tokens. Now that we have some tokens to spend, let's send some of them to another account.

We're going to craft a transaction "from scratch" for advanced users.

Start by creating a new file `send.js` in the project directory and add the code below:

```
const {
    CosmWasmClient, Secp256k1Pen, pubkeyToAddress, encodeSecp256k1Pubkey, makeSignBytes
} = require("secretjs");

require('dotenv').config();

const main = async () => {
    
    // As in previous tutorial, initialise client from ENV
    const mnemonic = process.env.MNEMONIC;
    const signingPen = await Secp256k1Pen.fromMnemonic(mnemonic);
    const pubkey = encodeSecp256k1Pubkey(signingPen.pubkey);
    const accAddress = pubkeyToAddress(pubkey, 'secret');
    const client = new CosmWasmClient(process.env.SECRET_NODE_URL);
    const chainId = await client.getChainId();


    // Optionally, define a memo for the transaction
    const memo = 'My first secret transaction, sending uscrt';

    // 1. Define TX message

    // 2. Define fees

    // 3. Sign transaction
    
    // 4. Broadcast TX

    // 5. Query TX by hash/ID
}

main().then(resp => {
    console.log(resp);
}).catch(err => {
    console.log(err);
})

```
By now this should look familiar to you. Starting from the top you can see that we import secretjs, dotenv, and then create a new instance using `CosmWasmClient`. This establishes the connection to our Secret Network node. 
We then get the network and account information.

Ok, letâ€™s move on to writing our first transaction!



### Define TX message
In the `send.js` file under the comment `// 1. Define TX message` add the following code snippet below:

```javascript
const sendMsg = {
    type: "cosmos-sdk/MsgSend",
    value: {
        from_address: accAddress,
        to_address: accAddress,
        amount: [
            {
                denom: "uscrt",
                amount: "1000000",
            },
        ],
    },
};
```

### Define fees
Under the comment `// 2. Define fees` add the following code snippet below:

```javascript
const fee = {
    amount: [
        {
            amount: "50000",
            denom: "uscrt",
        },
    ],
    gas: "100000",
};
```

### Sign transaction
Under the comment `// 3. Sign transaction` add the following code snippet below:

```javascript
const signBytes = makeSignBytes([sendMsg], fee, chainId, memo, accountNumber, sequence);
const signature = await signingPen.sign(signBytes);
const signedTx = {
    msg: [sendMsg],
    fee: fee,
    memo: memo,
    signatures: [signature],
};
```

### Broadcast transaction
Under the comment `// 4. Broadcast transaction` add the following code snippet below:

```javascript
const { logs, transactionHash } = await client.postTx(signedTx);
```

### Query transaction
Under the comment `// 5. Query transaction` add the following code snippet below:

```javascript
const query = {id: transactionHash}
const tx = await client.searchTx(query)
console.log('Transaction: ', tx);
```

Let's run the code:

```text
node send.js
```

If everything works right \(you have enough tokens, recipient is valid, etc\) you should see an output similar to:

```javascript
Transaction:  [
  {
    height: 400136,
    hash: '7C3C689EA4CEAD0C89BE039063909307C5C9048F76DF05E387E0368BD1C4435C',
    code: 0,
    rawLog: '[{"msg_index":0,"log":"","events":[{"type":"message","attributes":[{"key":"action","value":"send"},{"key":"sender","value":"secret1cdycaskx8g9gh9zpa5g8ah04ql0lzkrsxmcnfq"},{"key":"module","value":"bank"}]},{"type":"transfer","attributes":[{"key":"recipient","value":"secret1cdycaskx8g9gh9zpa5g8ah04ql0lzkrsxmcnfq"},{"key":"amount","value":"1000000uscrt"}]}]}]',
    logs: [ [Object] ],
    tx: { type: 'cosmos-sdk/StdTx', value: [Object] },
    timestamp: '2020-12-05T07:42:52Z'
  }
]
----------------------------------------------------------------
OPEN LINK BELOW to see transaction in Secret Network Holodeck Explorer!
https://explorer.secrettestnet.io/transactions/7C3C689EA4CEAD0C89BE039063909307C5C9048F76DF05E387E0368BD1C4435C
----------------------------------------------------------------


## Conclusion

Great job! Now you not only know how to read from the Secret Network, but also how to interact with it by crafting transactions from scratch with SecretJS and DataHub.

The complete code can be found on [**Github**](https://github.com/figment-networks/tutorials/blob/main/secret/4_send_transaction/main.js)**.** 

### Next Steps

SecretJS has a lot more to offer. We just scratched the surface of what this package can do. 
In the next tutorial, we will explore the use of SecretJS to deploy, instantiate and query contracts.

If you had any difficulties following this tutorial or simply want to discuss Secret Network tech with us you can join [**our community**](https://discord.gg/fszyM7K) today!

